(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))f(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const b of h.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function f(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();var In=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gn(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Bn(a){if(a.__esModule)return a;var t=a.default;if(typeof t=="function"){var n=function f(){return this instanceof f?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(a).forEach(function(f){var l=Object.getOwnPropertyDescriptor(a,f);Object.defineProperty(n,f,l.get?l:{enumerable:!0,get:function(){return a[f]}})}),n}var pn={exports:{}};(function(a){(function(t,n){a.exports?a.exports=n():(t.nacl||(t.nacl={}),t.nacl.util=n())})(In,function(){var t={};function n(f){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(f))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(f){if(typeof f!="string")throw new TypeError("expected string");var l,h=unescape(encodeURIComponent(f)),b=new Uint8Array(h.length);for(l=0;l<h.length;l++)b[l]=h.charCodeAt(l);return b},t.encodeUTF8=function(f){var l,h=[];for(l=0;l<f.length;l++)h.push(String.fromCharCode(f[l]));return decodeURIComponent(escape(h.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(t.encodeBase64=function(f){return Buffer.from(f).toString("base64")},t.decodeBase64=function(f){return n(f),new Uint8Array(Array.prototype.slice.call(Buffer.from(f,"base64"),0))}):(t.encodeBase64=function(f){return new Buffer(f).toString("base64")},t.decodeBase64=function(f){return n(f),new Uint8Array(Array.prototype.slice.call(new Buffer(f,"base64"),0))}):(t.encodeBase64=function(f){var l,h=[],b=f.length;for(l=0;l<b;l++)h.push(String.fromCharCode(f[l]));return btoa(h.join(""))},t.decodeBase64=function(f){n(f);var l,h=atob(f),b=new Uint8Array(h.length);for(l=0;l<h.length;l++)b[l]=h.charCodeAt(l);return b}),t})})(pn);var Mn=pn.exports;const He=gn(Mn);function Wn(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yn={exports:{}};const Nn={},Kn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})),kn=Bn(Kn);(function(a){(function(t){var n=function(r){var o,i=new Float64Array(16);if(r)for(o=0;o<r.length;o++)i[o]=r[o];return i},f=function(){throw new Error("no PRNG")},l=new Uint8Array(16),h=new Uint8Array(32);h[0]=9;var b=n(),_=n([1]),z=n([56129,1]),F=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ne=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ie=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ge=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Ue=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ye(r,o,i,e){r[o]=i>>24&255,r[o+1]=i>>16&255,r[o+2]=i>>8&255,r[o+3]=i&255,r[o+4]=e>>24&255,r[o+5]=e>>16&255,r[o+6]=e>>8&255,r[o+7]=e&255}function ke(r,o,i,e,s){var d,u=0;for(d=0;d<s;d++)u|=r[o+d]^i[e+d];return(1&u-1>>>8)-1}function qt(r,o,i,e){return ke(r,o,i,e,16)}function yt(r,o,i,e){return ke(r,o,i,e,32)}function En(r,o,i,e){for(var s=e[0]&255|(e[1]&255)<<8|(e[2]&255)<<16|(e[3]&255)<<24,d=i[0]&255|(i[1]&255)<<8|(i[2]&255)<<16|(i[3]&255)<<24,u=i[4]&255|(i[5]&255)<<8|(i[6]&255)<<16|(i[7]&255)<<24,p=i[8]&255|(i[9]&255)<<8|(i[10]&255)<<16|(i[11]&255)<<24,S=i[12]&255|(i[13]&255)<<8|(i[14]&255)<<16|(i[15]&255)<<24,j=e[4]&255|(e[5]&255)<<8|(e[6]&255)<<16|(e[7]&255)<<24,U=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,V=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,T=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,W=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,N=e[8]&255|(e[9]&255)<<8|(e[10]&255)<<16|(e[11]&255)<<24,D=i[16]&255|(i[17]&255)<<8|(i[18]&255)<<16|(i[19]&255)<<24,Y=i[20]&255|(i[21]&255)<<8|(i[22]&255)<<16|(i[23]&255)<<24,K=i[24]&255|(i[25]&255)<<8|(i[26]&255)<<16|(i[27]&255)<<24,O=i[28]&255|(i[29]&255)<<8|(i[30]&255)<<16|(i[31]&255)<<24,k=e[12]&255|(e[13]&255)<<8|(e[14]&255)<<16|(e[15]&255)<<24,P=s,I=d,C=u,L=p,A=S,E=j,x=U,v=V,w=T,g=W,y=N,m=D,B=Y,q=K,H=O,G=k,c,J=0;J<20;J+=2)c=P+B|0,A^=c<<7|c>>>25,c=A+P|0,w^=c<<9|c>>>23,c=w+A|0,B^=c<<13|c>>>19,c=B+w|0,P^=c<<18|c>>>14,c=E+I|0,g^=c<<7|c>>>25,c=g+E|0,q^=c<<9|c>>>23,c=q+g|0,I^=c<<13|c>>>19,c=I+q|0,E^=c<<18|c>>>14,c=y+x|0,H^=c<<7|c>>>25,c=H+y|0,C^=c<<9|c>>>23,c=C+H|0,x^=c<<13|c>>>19,c=x+C|0,y^=c<<18|c>>>14,c=G+m|0,L^=c<<7|c>>>25,c=L+G|0,v^=c<<9|c>>>23,c=v+L|0,m^=c<<13|c>>>19,c=m+v|0,G^=c<<18|c>>>14,c=P+L|0,I^=c<<7|c>>>25,c=I+P|0,C^=c<<9|c>>>23,c=C+I|0,L^=c<<13|c>>>19,c=L+C|0,P^=c<<18|c>>>14,c=E+A|0,x^=c<<7|c>>>25,c=x+E|0,v^=c<<9|c>>>23,c=v+x|0,A^=c<<13|c>>>19,c=A+v|0,E^=c<<18|c>>>14,c=y+g|0,m^=c<<7|c>>>25,c=m+y|0,w^=c<<9|c>>>23,c=w+m|0,g^=c<<13|c>>>19,c=g+w|0,y^=c<<18|c>>>14,c=G+H|0,B^=c<<7|c>>>25,c=B+G|0,q^=c<<9|c>>>23,c=q+B|0,H^=c<<13|c>>>19,c=H+q|0,G^=c<<18|c>>>14;P=P+s|0,I=I+d|0,C=C+u|0,L=L+p|0,A=A+S|0,E=E+j|0,x=x+U|0,v=v+V|0,w=w+T|0,g=g+W|0,y=y+N|0,m=m+D|0,B=B+Y|0,q=q+K|0,H=H+O|0,G=G+k|0,r[0]=P>>>0&255,r[1]=P>>>8&255,r[2]=P>>>16&255,r[3]=P>>>24&255,r[4]=I>>>0&255,r[5]=I>>>8&255,r[6]=I>>>16&255,r[7]=I>>>24&255,r[8]=C>>>0&255,r[9]=C>>>8&255,r[10]=C>>>16&255,r[11]=C>>>24&255,r[12]=L>>>0&255,r[13]=L>>>8&255,r[14]=L>>>16&255,r[15]=L>>>24&255,r[16]=A>>>0&255,r[17]=A>>>8&255,r[18]=A>>>16&255,r[19]=A>>>24&255,r[20]=E>>>0&255,r[21]=E>>>8&255,r[22]=E>>>16&255,r[23]=E>>>24&255,r[24]=x>>>0&255,r[25]=x>>>8&255,r[26]=x>>>16&255,r[27]=x>>>24&255,r[28]=v>>>0&255,r[29]=v>>>8&255,r[30]=v>>>16&255,r[31]=v>>>24&255,r[32]=w>>>0&255,r[33]=w>>>8&255,r[34]=w>>>16&255,r[35]=w>>>24&255,r[36]=g>>>0&255,r[37]=g>>>8&255,r[38]=g>>>16&255,r[39]=g>>>24&255,r[40]=y>>>0&255,r[41]=y>>>8&255,r[42]=y>>>16&255,r[43]=y>>>24&255,r[44]=m>>>0&255,r[45]=m>>>8&255,r[46]=m>>>16&255,r[47]=m>>>24&255,r[48]=B>>>0&255,r[49]=B>>>8&255,r[50]=B>>>16&255,r[51]=B>>>24&255,r[52]=q>>>0&255,r[53]=q>>>8&255,r[54]=q>>>16&255,r[55]=q>>>24&255,r[56]=H>>>0&255,r[57]=H>>>8&255,r[58]=H>>>16&255,r[59]=H>>>24&255,r[60]=G>>>0&255,r[61]=G>>>8&255,r[62]=G>>>16&255,r[63]=G>>>24&255}function Un(r,o,i,e){for(var s=e[0]&255|(e[1]&255)<<8|(e[2]&255)<<16|(e[3]&255)<<24,d=i[0]&255|(i[1]&255)<<8|(i[2]&255)<<16|(i[3]&255)<<24,u=i[4]&255|(i[5]&255)<<8|(i[6]&255)<<16|(i[7]&255)<<24,p=i[8]&255|(i[9]&255)<<8|(i[10]&255)<<16|(i[11]&255)<<24,S=i[12]&255|(i[13]&255)<<8|(i[14]&255)<<16|(i[15]&255)<<24,j=e[4]&255|(e[5]&255)<<8|(e[6]&255)<<16|(e[7]&255)<<24,U=o[0]&255|(o[1]&255)<<8|(o[2]&255)<<16|(o[3]&255)<<24,V=o[4]&255|(o[5]&255)<<8|(o[6]&255)<<16|(o[7]&255)<<24,T=o[8]&255|(o[9]&255)<<8|(o[10]&255)<<16|(o[11]&255)<<24,W=o[12]&255|(o[13]&255)<<8|(o[14]&255)<<16|(o[15]&255)<<24,N=e[8]&255|(e[9]&255)<<8|(e[10]&255)<<16|(e[11]&255)<<24,D=i[16]&255|(i[17]&255)<<8|(i[18]&255)<<16|(i[19]&255)<<24,Y=i[20]&255|(i[21]&255)<<8|(i[22]&255)<<16|(i[23]&255)<<24,K=i[24]&255|(i[25]&255)<<8|(i[26]&255)<<16|(i[27]&255)<<24,O=i[28]&255|(i[29]&255)<<8|(i[30]&255)<<16|(i[31]&255)<<24,k=e[12]&255|(e[13]&255)<<8|(e[14]&255)<<16|(e[15]&255)<<24,P=s,I=d,C=u,L=p,A=S,E=j,x=U,v=V,w=T,g=W,y=N,m=D,B=Y,q=K,H=O,G=k,c,J=0;J<20;J+=2)c=P+B|0,A^=c<<7|c>>>25,c=A+P|0,w^=c<<9|c>>>23,c=w+A|0,B^=c<<13|c>>>19,c=B+w|0,P^=c<<18|c>>>14,c=E+I|0,g^=c<<7|c>>>25,c=g+E|0,q^=c<<9|c>>>23,c=q+g|0,I^=c<<13|c>>>19,c=I+q|0,E^=c<<18|c>>>14,c=y+x|0,H^=c<<7|c>>>25,c=H+y|0,C^=c<<9|c>>>23,c=C+H|0,x^=c<<13|c>>>19,c=x+C|0,y^=c<<18|c>>>14,c=G+m|0,L^=c<<7|c>>>25,c=L+G|0,v^=c<<9|c>>>23,c=v+L|0,m^=c<<13|c>>>19,c=m+v|0,G^=c<<18|c>>>14,c=P+L|0,I^=c<<7|c>>>25,c=I+P|0,C^=c<<9|c>>>23,c=C+I|0,L^=c<<13|c>>>19,c=L+C|0,P^=c<<18|c>>>14,c=E+A|0,x^=c<<7|c>>>25,c=x+E|0,v^=c<<9|c>>>23,c=v+x|0,A^=c<<13|c>>>19,c=A+v|0,E^=c<<18|c>>>14,c=y+g|0,m^=c<<7|c>>>25,c=m+y|0,w^=c<<9|c>>>23,c=w+m|0,g^=c<<13|c>>>19,c=g+w|0,y^=c<<18|c>>>14,c=G+H|0,B^=c<<7|c>>>25,c=B+G|0,q^=c<<9|c>>>23,c=q+B|0,H^=c<<13|c>>>19,c=H+q|0,G^=c<<18|c>>>14;r[0]=P>>>0&255,r[1]=P>>>8&255,r[2]=P>>>16&255,r[3]=P>>>24&255,r[4]=E>>>0&255,r[5]=E>>>8&255,r[6]=E>>>16&255,r[7]=E>>>24&255,r[8]=y>>>0&255,r[9]=y>>>8&255,r[10]=y>>>16&255,r[11]=y>>>24&255,r[12]=G>>>0&255,r[13]=G>>>8&255,r[14]=G>>>16&255,r[15]=G>>>24&255,r[16]=x>>>0&255,r[17]=x>>>8&255,r[18]=x>>>16&255,r[19]=x>>>24&255,r[20]=v>>>0&255,r[21]=v>>>8&255,r[22]=v>>>16&255,r[23]=v>>>24&255,r[24]=w>>>0&255,r[25]=w>>>8&255,r[26]=w>>>16&255,r[27]=w>>>24&255,r[28]=g>>>0&255,r[29]=g>>>8&255,r[30]=g>>>16&255,r[31]=g>>>24&255}function ze(r,o,i,e){En(r,o,i,e)}function Ze(r,o,i,e){Un(r,o,i,e)}var Re=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Gt(r,o,i,e,s,d,u){var p=new Uint8Array(16),S=new Uint8Array(64),j,U;for(U=0;U<16;U++)p[U]=0;for(U=0;U<8;U++)p[U]=d[U];for(;s>=64;){for(ze(S,p,u,Re),U=0;U<64;U++)r[o+U]=i[e+U]^S[U];for(j=1,U=8;U<16;U++)j=j+(p[U]&255)|0,p[U]=j&255,j>>>=8;s-=64,o+=64,e+=64}if(s>0)for(ze(S,p,u,Re),U=0;U<s;U++)r[o+U]=i[e+U]^S[U];return 0}function Ht(r,o,i,e,s){var d=new Uint8Array(16),u=new Uint8Array(64),p,S;for(S=0;S<16;S++)d[S]=0;for(S=0;S<8;S++)d[S]=e[S];for(;i>=64;){for(ze(u,d,s,Re),S=0;S<64;S++)r[o+S]=u[S];for(p=1,S=8;S<16;S++)p=p+(d[S]&255)|0,d[S]=p&255,p>>>=8;i-=64,o+=64}if(i>0)for(ze(u,d,s,Re),S=0;S<i;S++)r[o+S]=u[S];return 0}function $t(r,o,i,e,s){var d=new Uint8Array(32);Ze(d,e,s,Re);for(var u=new Uint8Array(8),p=0;p<8;p++)u[p]=e[p+16];return Ht(r,o,i,u,d)}function bt(r,o,i,e,s,d,u){var p=new Uint8Array(32);Ze(p,d,u,Re);for(var S=new Uint8Array(8),j=0;j<8;j++)S[j]=d[j+16];return Gt(r,o,i,e,s,S,p)}var Xe=function(r){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var o,i,e,s,d,u,p,S;o=r[0]&255|(r[1]&255)<<8,this.r[0]=o&8191,i=r[2]&255|(r[3]&255)<<8,this.r[1]=(o>>>13|i<<3)&8191,e=r[4]&255|(r[5]&255)<<8,this.r[2]=(i>>>10|e<<6)&7939,s=r[6]&255|(r[7]&255)<<8,this.r[3]=(e>>>7|s<<9)&8191,d=r[8]&255|(r[9]&255)<<8,this.r[4]=(s>>>4|d<<12)&255,this.r[5]=d>>>1&8190,u=r[10]&255|(r[11]&255)<<8,this.r[6]=(d>>>14|u<<2)&8191,p=r[12]&255|(r[13]&255)<<8,this.r[7]=(u>>>11|p<<5)&8065,S=r[14]&255|(r[15]&255)<<8,this.r[8]=(p>>>8|S<<8)&8191,this.r[9]=S>>>5&127,this.pad[0]=r[16]&255|(r[17]&255)<<8,this.pad[1]=r[18]&255|(r[19]&255)<<8,this.pad[2]=r[20]&255|(r[21]&255)<<8,this.pad[3]=r[22]&255|(r[23]&255)<<8,this.pad[4]=r[24]&255|(r[25]&255)<<8,this.pad[5]=r[26]&255|(r[27]&255)<<8,this.pad[6]=r[28]&255|(r[29]&255)<<8,this.pad[7]=r[30]&255|(r[31]&255)<<8};Xe.prototype.blocks=function(r,o,i){for(var e=this.fin?0:2048,s,d,u,p,S,j,U,V,T,W,N,D,Y,K,O,k,P,I,C,L=this.h[0],A=this.h[1],E=this.h[2],x=this.h[3],v=this.h[4],w=this.h[5],g=this.h[6],y=this.h[7],m=this.h[8],B=this.h[9],q=this.r[0],H=this.r[1],G=this.r[2],c=this.r[3],J=this.r[4],ee=this.r[5],te=this.r[6],$=this.r[7],X=this.r[8],Q=this.r[9];i>=16;)s=r[o+0]&255|(r[o+1]&255)<<8,L+=s&8191,d=r[o+2]&255|(r[o+3]&255)<<8,A+=(s>>>13|d<<3)&8191,u=r[o+4]&255|(r[o+5]&255)<<8,E+=(d>>>10|u<<6)&8191,p=r[o+6]&255|(r[o+7]&255)<<8,x+=(u>>>7|p<<9)&8191,S=r[o+8]&255|(r[o+9]&255)<<8,v+=(p>>>4|S<<12)&8191,w+=S>>>1&8191,j=r[o+10]&255|(r[o+11]&255)<<8,g+=(S>>>14|j<<2)&8191,U=r[o+12]&255|(r[o+13]&255)<<8,y+=(j>>>11|U<<5)&8191,V=r[o+14]&255|(r[o+15]&255)<<8,m+=(U>>>8|V<<8)&8191,B+=V>>>5|e,T=0,W=T,W+=L*q,W+=A*(5*Q),W+=E*(5*X),W+=x*(5*$),W+=v*(5*te),T=W>>>13,W&=8191,W+=w*(5*ee),W+=g*(5*J),W+=y*(5*c),W+=m*(5*G),W+=B*(5*H),T+=W>>>13,W&=8191,N=T,N+=L*H,N+=A*q,N+=E*(5*Q),N+=x*(5*X),N+=v*(5*$),T=N>>>13,N&=8191,N+=w*(5*te),N+=g*(5*ee),N+=y*(5*J),N+=m*(5*c),N+=B*(5*G),T+=N>>>13,N&=8191,D=T,D+=L*G,D+=A*H,D+=E*q,D+=x*(5*Q),D+=v*(5*X),T=D>>>13,D&=8191,D+=w*(5*$),D+=g*(5*te),D+=y*(5*ee),D+=m*(5*J),D+=B*(5*c),T+=D>>>13,D&=8191,Y=T,Y+=L*c,Y+=A*G,Y+=E*H,Y+=x*q,Y+=v*(5*Q),T=Y>>>13,Y&=8191,Y+=w*(5*X),Y+=g*(5*$),Y+=y*(5*te),Y+=m*(5*ee),Y+=B*(5*J),T+=Y>>>13,Y&=8191,K=T,K+=L*J,K+=A*c,K+=E*G,K+=x*H,K+=v*q,T=K>>>13,K&=8191,K+=w*(5*Q),K+=g*(5*X),K+=y*(5*$),K+=m*(5*te),K+=B*(5*ee),T+=K>>>13,K&=8191,O=T,O+=L*ee,O+=A*J,O+=E*c,O+=x*G,O+=v*H,T=O>>>13,O&=8191,O+=w*q,O+=g*(5*Q),O+=y*(5*X),O+=m*(5*$),O+=B*(5*te),T+=O>>>13,O&=8191,k=T,k+=L*te,k+=A*ee,k+=E*J,k+=x*c,k+=v*G,T=k>>>13,k&=8191,k+=w*H,k+=g*q,k+=y*(5*Q),k+=m*(5*X),k+=B*(5*$),T+=k>>>13,k&=8191,P=T,P+=L*$,P+=A*te,P+=E*ee,P+=x*J,P+=v*c,T=P>>>13,P&=8191,P+=w*G,P+=g*H,P+=y*q,P+=m*(5*Q),P+=B*(5*X),T+=P>>>13,P&=8191,I=T,I+=L*X,I+=A*$,I+=E*te,I+=x*ee,I+=v*J,T=I>>>13,I&=8191,I+=w*c,I+=g*G,I+=y*H,I+=m*q,I+=B*(5*Q),T+=I>>>13,I&=8191,C=T,C+=L*Q,C+=A*X,C+=E*$,C+=x*te,C+=v*ee,T=C>>>13,C&=8191,C+=w*J,C+=g*c,C+=y*G,C+=m*H,C+=B*q,T+=C>>>13,C&=8191,T=(T<<2)+T|0,T=T+W|0,W=T&8191,T=T>>>13,N+=T,L=W,A=N,E=D,x=Y,v=K,w=O,g=k,y=P,m=I,B=C,o+=16,i-=16;this.h[0]=L,this.h[1]=A,this.h[2]=E,this.h[3]=x,this.h[4]=v,this.h[5]=w,this.h[6]=g,this.h[7]=y,this.h[8]=m,this.h[9]=B},Xe.prototype.finish=function(r,o){var i=new Uint16Array(10),e,s,d,u;if(this.leftover){for(u=this.leftover,this.buffer[u++]=1;u<16;u++)this.buffer[u]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(e=this.h[1]>>>13,this.h[1]&=8191,u=2;u<10;u++)this.h[u]+=e,e=this.h[u]>>>13,this.h[u]&=8191;for(this.h[0]+=e*5,e=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=e,e=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=e,i[0]=this.h[0]+5,e=i[0]>>>13,i[0]&=8191,u=1;u<10;u++)i[u]=this.h[u]+e,e=i[u]>>>13,i[u]&=8191;for(i[9]-=8192,s=(e^1)-1,u=0;u<10;u++)i[u]&=s;for(s=~s,u=0;u<10;u++)this.h[u]=this.h[u]&s|i[u];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,d=this.h[0]+this.pad[0],this.h[0]=d&65535,u=1;u<8;u++)d=(this.h[u]+this.pad[u]|0)+(d>>>16)|0,this.h[u]=d&65535;r[o+0]=this.h[0]>>>0&255,r[o+1]=this.h[0]>>>8&255,r[o+2]=this.h[1]>>>0&255,r[o+3]=this.h[1]>>>8&255,r[o+4]=this.h[2]>>>0&255,r[o+5]=this.h[2]>>>8&255,r[o+6]=this.h[3]>>>0&255,r[o+7]=this.h[3]>>>8&255,r[o+8]=this.h[4]>>>0&255,r[o+9]=this.h[4]>>>8&255,r[o+10]=this.h[5]>>>0&255,r[o+11]=this.h[5]>>>8&255,r[o+12]=this.h[6]>>>0&255,r[o+13]=this.h[6]>>>8&255,r[o+14]=this.h[7]>>>0&255,r[o+15]=this.h[7]>>>8&255},Xe.prototype.update=function(r,o,i){var e,s;if(this.leftover){for(s=16-this.leftover,s>i&&(s=i),e=0;e<s;e++)this.buffer[this.leftover+e]=r[o+e];if(i-=s,o+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(i>=16&&(s=i-i%16,this.blocks(r,o,s),o+=s,i-=s),i){for(e=0;e<i;e++)this.buffer[this.leftover+e]=r[o+e];this.leftover+=i}};function wt(r,o,i,e,s,d){var u=new Xe(d);return u.update(i,e,s),u.finish(r,o),0}function Jt(r,o,i,e,s,d){var u=new Uint8Array(16);return wt(u,0,i,e,s,d),qt(r,o,u,0)}function mt(r,o,i,e,s){var d;if(i<32)return-1;for(bt(r,0,o,0,i,e,s),wt(r,16,r,32,i-32,r),d=0;d<16;d++)r[d]=0;return 0}function _t(r,o,i,e,s){var d,u=new Uint8Array(32);if(i<32||($t(u,0,32,e,s),Jt(o,16,o,32,i-32,u)!==0))return-1;for(bt(r,0,o,0,i,e,s),d=0;d<32;d++)r[d]=0;return 0}function Se(r,o){var i;for(i=0;i<16;i++)r[i]=o[i]|0}function St(r){var o,i,e=1;for(o=0;o<16;o++)i=r[o]+e+65535,e=Math.floor(i/65536),r[o]=i-e*65536;r[0]+=e-1+37*(e-1)}function Ae(r,o,i){for(var e,s=~(i-1),d=0;d<16;d++)e=s&(r[d]^o[d]),r[d]^=e,o[d]^=e}function je(r,o){var i,e,s,d=n(),u=n();for(i=0;i<16;i++)u[i]=o[i];for(St(u),St(u),St(u),e=0;e<2;e++){for(d[0]=u[0]-65517,i=1;i<15;i++)d[i]=u[i]-65535-(d[i-1]>>16&1),d[i-1]&=65535;d[15]=u[15]-32767-(d[14]>>16&1),s=d[15]>>16&1,d[14]&=65535,Ae(u,d,1-s)}for(i=0;i<16;i++)r[2*i]=u[i]&255,r[2*i+1]=u[i]>>8}function zt(r,o){var i=new Uint8Array(32),e=new Uint8Array(32);return je(i,r),je(e,o),yt(i,0,e,0)}function Zt(r){var o=new Uint8Array(32);return je(o,r),o[0]&1}function Et(r,o){var i;for(i=0;i<16;i++)r[i]=o[2*i]+(o[2*i+1]<<8);r[15]&=32767}function be(r,o,i){for(var e=0;e<16;e++)r[e]=o[e]+i[e]}function we(r,o,i){for(var e=0;e<16;e++)r[e]=o[e]-i[e]}function Z(r,o,i){var e,s,d=0,u=0,p=0,S=0,j=0,U=0,V=0,T=0,W=0,N=0,D=0,Y=0,K=0,O=0,k=0,P=0,I=0,C=0,L=0,A=0,E=0,x=0,v=0,w=0,g=0,y=0,m=0,B=0,q=0,H=0,G=0,c=i[0],J=i[1],ee=i[2],te=i[3],$=i[4],X=i[5],Q=i[6],fe=i[7],re=i[8],oe=i[9],se=i[10],ae=i[11],ce=i[12],de=i[13],ue=i[14],he=i[15];e=o[0],d+=e*c,u+=e*J,p+=e*ee,S+=e*te,j+=e*$,U+=e*X,V+=e*Q,T+=e*fe,W+=e*re,N+=e*oe,D+=e*se,Y+=e*ae,K+=e*ce,O+=e*de,k+=e*ue,P+=e*he,e=o[1],u+=e*c,p+=e*J,S+=e*ee,j+=e*te,U+=e*$,V+=e*X,T+=e*Q,W+=e*fe,N+=e*re,D+=e*oe,Y+=e*se,K+=e*ae,O+=e*ce,k+=e*de,P+=e*ue,I+=e*he,e=o[2],p+=e*c,S+=e*J,j+=e*ee,U+=e*te,V+=e*$,T+=e*X,W+=e*Q,N+=e*fe,D+=e*re,Y+=e*oe,K+=e*se,O+=e*ae,k+=e*ce,P+=e*de,I+=e*ue,C+=e*he,e=o[3],S+=e*c,j+=e*J,U+=e*ee,V+=e*te,T+=e*$,W+=e*X,N+=e*Q,D+=e*fe,Y+=e*re,K+=e*oe,O+=e*se,k+=e*ae,P+=e*ce,I+=e*de,C+=e*ue,L+=e*he,e=o[4],j+=e*c,U+=e*J,V+=e*ee,T+=e*te,W+=e*$,N+=e*X,D+=e*Q,Y+=e*fe,K+=e*re,O+=e*oe,k+=e*se,P+=e*ae,I+=e*ce,C+=e*de,L+=e*ue,A+=e*he,e=o[5],U+=e*c,V+=e*J,T+=e*ee,W+=e*te,N+=e*$,D+=e*X,Y+=e*Q,K+=e*fe,O+=e*re,k+=e*oe,P+=e*se,I+=e*ae,C+=e*ce,L+=e*de,A+=e*ue,E+=e*he,e=o[6],V+=e*c,T+=e*J,W+=e*ee,N+=e*te,D+=e*$,Y+=e*X,K+=e*Q,O+=e*fe,k+=e*re,P+=e*oe,I+=e*se,C+=e*ae,L+=e*ce,A+=e*de,E+=e*ue,x+=e*he,e=o[7],T+=e*c,W+=e*J,N+=e*ee,D+=e*te,Y+=e*$,K+=e*X,O+=e*Q,k+=e*fe,P+=e*re,I+=e*oe,C+=e*se,L+=e*ae,A+=e*ce,E+=e*de,x+=e*ue,v+=e*he,e=o[8],W+=e*c,N+=e*J,D+=e*ee,Y+=e*te,K+=e*$,O+=e*X,k+=e*Q,P+=e*fe,I+=e*re,C+=e*oe,L+=e*se,A+=e*ae,E+=e*ce,x+=e*de,v+=e*ue,w+=e*he,e=o[9],N+=e*c,D+=e*J,Y+=e*ee,K+=e*te,O+=e*$,k+=e*X,P+=e*Q,I+=e*fe,C+=e*re,L+=e*oe,A+=e*se,E+=e*ae,x+=e*ce,v+=e*de,w+=e*ue,g+=e*he,e=o[10],D+=e*c,Y+=e*J,K+=e*ee,O+=e*te,k+=e*$,P+=e*X,I+=e*Q,C+=e*fe,L+=e*re,A+=e*oe,E+=e*se,x+=e*ae,v+=e*ce,w+=e*de,g+=e*ue,y+=e*he,e=o[11],Y+=e*c,K+=e*J,O+=e*ee,k+=e*te,P+=e*$,I+=e*X,C+=e*Q,L+=e*fe,A+=e*re,E+=e*oe,x+=e*se,v+=e*ae,w+=e*ce,g+=e*de,y+=e*ue,m+=e*he,e=o[12],K+=e*c,O+=e*J,k+=e*ee,P+=e*te,I+=e*$,C+=e*X,L+=e*Q,A+=e*fe,E+=e*re,x+=e*oe,v+=e*se,w+=e*ae,g+=e*ce,y+=e*de,m+=e*ue,B+=e*he,e=o[13],O+=e*c,k+=e*J,P+=e*ee,I+=e*te,C+=e*$,L+=e*X,A+=e*Q,E+=e*fe,x+=e*re,v+=e*oe,w+=e*se,g+=e*ae,y+=e*ce,m+=e*de,B+=e*ue,q+=e*he,e=o[14],k+=e*c,P+=e*J,I+=e*ee,C+=e*te,L+=e*$,A+=e*X,E+=e*Q,x+=e*fe,v+=e*re,w+=e*oe,g+=e*se,y+=e*ae,m+=e*ce,B+=e*de,q+=e*ue,H+=e*he,e=o[15],P+=e*c,I+=e*J,C+=e*ee,L+=e*te,A+=e*$,E+=e*X,x+=e*Q,v+=e*fe,w+=e*re,g+=e*oe,y+=e*se,m+=e*ae,B+=e*ce,q+=e*de,H+=e*ue,G+=e*he,d+=38*I,u+=38*C,p+=38*L,S+=38*A,j+=38*E,U+=38*x,V+=38*v,T+=38*w,W+=38*g,N+=38*y,D+=38*m,Y+=38*B,K+=38*q,O+=38*H,k+=38*G,s=1,e=d+s+65535,s=Math.floor(e/65536),d=e-s*65536,e=u+s+65535,s=Math.floor(e/65536),u=e-s*65536,e=p+s+65535,s=Math.floor(e/65536),p=e-s*65536,e=S+s+65535,s=Math.floor(e/65536),S=e-s*65536,e=j+s+65535,s=Math.floor(e/65536),j=e-s*65536,e=U+s+65535,s=Math.floor(e/65536),U=e-s*65536,e=V+s+65535,s=Math.floor(e/65536),V=e-s*65536,e=T+s+65535,s=Math.floor(e/65536),T=e-s*65536,e=W+s+65535,s=Math.floor(e/65536),W=e-s*65536,e=N+s+65535,s=Math.floor(e/65536),N=e-s*65536,e=D+s+65535,s=Math.floor(e/65536),D=e-s*65536,e=Y+s+65535,s=Math.floor(e/65536),Y=e-s*65536,e=K+s+65535,s=Math.floor(e/65536),K=e-s*65536,e=O+s+65535,s=Math.floor(e/65536),O=e-s*65536,e=k+s+65535,s=Math.floor(e/65536),k=e-s*65536,e=P+s+65535,s=Math.floor(e/65536),P=e-s*65536,d+=s-1+37*(s-1),s=1,e=d+s+65535,s=Math.floor(e/65536),d=e-s*65536,e=u+s+65535,s=Math.floor(e/65536),u=e-s*65536,e=p+s+65535,s=Math.floor(e/65536),p=e-s*65536,e=S+s+65535,s=Math.floor(e/65536),S=e-s*65536,e=j+s+65535,s=Math.floor(e/65536),j=e-s*65536,e=U+s+65535,s=Math.floor(e/65536),U=e-s*65536,e=V+s+65535,s=Math.floor(e/65536),V=e-s*65536,e=T+s+65535,s=Math.floor(e/65536),T=e-s*65536,e=W+s+65535,s=Math.floor(e/65536),W=e-s*65536,e=N+s+65535,s=Math.floor(e/65536),N=e-s*65536,e=D+s+65535,s=Math.floor(e/65536),D=e-s*65536,e=Y+s+65535,s=Math.floor(e/65536),Y=e-s*65536,e=K+s+65535,s=Math.floor(e/65536),K=e-s*65536,e=O+s+65535,s=Math.floor(e/65536),O=e-s*65536,e=k+s+65535,s=Math.floor(e/65536),k=e-s*65536,e=P+s+65535,s=Math.floor(e/65536),P=e-s*65536,d+=s-1+37*(s-1),r[0]=d,r[1]=u,r[2]=p,r[3]=S,r[4]=j,r[5]=U,r[6]=V,r[7]=T,r[8]=W,r[9]=N,r[10]=D,r[11]=Y,r[12]=K,r[13]=O,r[14]=k,r[15]=P}function pe(r,o){Z(r,o,o)}function Xt(r,o){var i=n(),e;for(e=0;e<16;e++)i[e]=o[e];for(e=253;e>=0;e--)pe(i,i),e!==2&&e!==4&&Z(i,i,o);for(e=0;e<16;e++)r[e]=i[e]}function Qt(r,o){var i=n(),e;for(e=0;e<16;e++)i[e]=o[e];for(e=250;e>=0;e--)pe(i,i),e!==1&&Z(i,i,o);for(e=0;e<16;e++)r[e]=i[e]}function Qe(r,o,i){var e=new Uint8Array(32),s=new Float64Array(80),d,u,p=n(),S=n(),j=n(),U=n(),V=n(),T=n();for(u=0;u<31;u++)e[u]=o[u];for(e[31]=o[31]&127|64,e[0]&=248,Et(s,i),u=0;u<16;u++)S[u]=s[u],U[u]=p[u]=j[u]=0;for(p[0]=U[0]=1,u=254;u>=0;--u)d=e[u>>>3]>>>(u&7)&1,Ae(p,S,d),Ae(j,U,d),be(V,p,j),we(p,p,j),be(j,S,U),we(S,S,U),pe(U,V),pe(T,p),Z(p,j,p),Z(j,S,V),be(V,p,j),we(p,p,j),pe(S,p),we(j,U,T),Z(p,j,z),be(p,p,U),Z(j,j,p),Z(p,U,T),Z(U,S,s),pe(S,V),Ae(p,S,d),Ae(j,U,d);for(u=0;u<16;u++)s[u+16]=p[u],s[u+32]=j[u],s[u+48]=S[u],s[u+64]=U[u];var W=s.subarray(32),N=s.subarray(16);return Xt(W,W),Z(N,N,W),je(r,N),0}function Ve(r,o){return Qe(r,o,h)}function Vt(r,o){return f(o,32),Ve(r,o)}function et(r,o,i){var e=new Uint8Array(32);return Qe(e,i,o),Ze(r,l,e,Re)}var en=mt,Cn=_t;function Tn(r,o,i,e,s,d){var u=new Uint8Array(32);return et(u,s,d),en(r,o,i,e,u)}function Rn(r,o,i,e,s,d){var u=new Uint8Array(32);return et(u,s,d),Cn(r,o,i,e,u)}var tn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function nn(r,o,i,e){for(var s=new Int32Array(16),d=new Int32Array(16),u,p,S,j,U,V,T,W,N,D,Y,K,O,k,P,I,C,L,A,E,x,v,w,g,y,m,B=r[0],q=r[1],H=r[2],G=r[3],c=r[4],J=r[5],ee=r[6],te=r[7],$=o[0],X=o[1],Q=o[2],fe=o[3],re=o[4],oe=o[5],se=o[6],ae=o[7],ce=0;e>=128;){for(A=0;A<16;A++)E=8*A+ce,s[A]=i[E+0]<<24|i[E+1]<<16|i[E+2]<<8|i[E+3],d[A]=i[E+4]<<24|i[E+5]<<16|i[E+6]<<8|i[E+7];for(A=0;A<80;A++)if(u=B,p=q,S=H,j=G,U=c,V=J,T=ee,W=te,N=$,D=X,Y=Q,K=fe,O=re,k=oe,P=se,I=ae,x=te,v=ae,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=(c>>>14|re<<18)^(c>>>18|re<<14)^(re>>>9|c<<23),v=(re>>>14|c<<18)^(re>>>18|c<<14)^(c>>>9|re<<23),w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,x=c&J^~c&ee,v=re&oe^~re&se,w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,x=tn[A*2],v=tn[A*2+1],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,x=s[A%16],v=d[A%16],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,C=y&65535|m<<16,L=w&65535|g<<16,x=C,v=L,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=(B>>>28|$<<4)^($>>>2|B<<30)^($>>>7|B<<25),v=($>>>28|B<<4)^(B>>>2|$<<30)^(B>>>7|$<<25),w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,x=B&q^B&H^q&H,v=$&X^$&Q^X&Q,w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,W=y&65535|m<<16,I=w&65535|g<<16,x=j,v=K,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=C,v=L,w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,j=y&65535|m<<16,K=w&65535|g<<16,q=u,H=p,G=S,c=j,J=U,ee=V,te=T,B=W,X=N,Q=D,fe=Y,re=K,oe=O,se=k,ae=P,$=I,A%16===15)for(E=0;E<16;E++)x=s[E],v=d[E],w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=s[(E+9)%16],v=d[(E+9)%16],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,C=s[(E+1)%16],L=d[(E+1)%16],x=(C>>>1|L<<31)^(C>>>8|L<<24)^C>>>7,v=(L>>>1|C<<31)^(L>>>8|C<<24)^(L>>>7|C<<25),w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,C=s[(E+14)%16],L=d[(E+14)%16],x=(C>>>19|L<<13)^(L>>>29|C<<3)^C>>>6,v=(L>>>19|C<<13)^(C>>>29|L<<3)^(L>>>6|C<<26),w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,s[E]=y&65535|m<<16,d[E]=w&65535|g<<16;x=B,v=$,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[0],v=o[0],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[0]=B=y&65535|m<<16,o[0]=$=w&65535|g<<16,x=q,v=X,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[1],v=o[1],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[1]=q=y&65535|m<<16,o[1]=X=w&65535|g<<16,x=H,v=Q,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[2],v=o[2],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[2]=H=y&65535|m<<16,o[2]=Q=w&65535|g<<16,x=G,v=fe,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[3],v=o[3],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[3]=G=y&65535|m<<16,o[3]=fe=w&65535|g<<16,x=c,v=re,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[4],v=o[4],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[4]=c=y&65535|m<<16,o[4]=re=w&65535|g<<16,x=J,v=oe,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[5],v=o[5],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[5]=J=y&65535|m<<16,o[5]=oe=w&65535|g<<16,x=ee,v=se,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[6],v=o[6],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[6]=ee=y&65535|m<<16,o[6]=se=w&65535|g<<16,x=te,v=ae,w=v&65535,g=v>>>16,y=x&65535,m=x>>>16,x=r[7],v=o[7],w+=v&65535,g+=v>>>16,y+=x&65535,m+=x>>>16,g+=w>>>16,y+=g>>>16,m+=y>>>16,r[7]=te=y&65535|m<<16,o[7]=ae=w&65535|g<<16,ce+=128,e-=128}return e}function Pe(r,o,i){var e=new Int32Array(8),s=new Int32Array(8),d=new Uint8Array(256),u,p=i;for(e[0]=1779033703,e[1]=3144134277,e[2]=1013904242,e[3]=2773480762,e[4]=1359893119,e[5]=2600822924,e[6]=528734635,e[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,nn(e,s,o,i),i%=128,u=0;u<i;u++)d[u]=o[p-i+u];for(d[i]=128,i=256-128*(i<112?1:0),d[i-9]=0,ye(d,i-8,p/536870912|0,p<<3),nn(e,s,d,i),u=0;u<8;u++)ye(r,8*u,e[u],s[u]);return 0}function tt(r,o){var i=n(),e=n(),s=n(),d=n(),u=n(),p=n(),S=n(),j=n(),U=n();we(i,r[1],r[0]),we(U,o[1],o[0]),Z(i,i,U),be(e,r[0],r[1]),be(U,o[0],o[1]),Z(e,e,U),Z(s,r[3],o[3]),Z(s,s,ne),Z(d,r[2],o[2]),be(d,d,d),we(u,e,i),we(p,d,s),be(S,d,s),be(j,e,i),Z(r[0],u,p),Z(r[1],j,S),Z(r[2],S,p),Z(r[3],u,j)}function rn(r,o,i){var e;for(e=0;e<4;e++)Ae(r[e],o[e],i)}function Ut(r,o){var i=n(),e=n(),s=n();Xt(s,o[2]),Z(i,o[0],s),Z(e,o[1],s),je(r,e),r[31]^=Zt(i)<<7}function Ct(r,o,i){var e,s;for(Se(r[0],b),Se(r[1],_),Se(r[2],_),Se(r[3],b),s=255;s>=0;--s)e=i[s/8|0]>>(s&7)&1,rn(r,o,e),tt(o,r),tt(r,r),rn(r,o,e)}function nt(r,o){var i=[n(),n(),n(),n()];Se(i[0],ie),Se(i[1],ge),Se(i[2],_),Z(i[3],ie,ge),Ct(r,i,o)}function Tt(r,o,i){var e=new Uint8Array(64),s=[n(),n(),n(),n()],d;for(i||f(o,32),Pe(e,o,32),e[0]&=248,e[31]&=127,e[31]|=64,nt(s,e),Ut(r,s),d=0;d<32;d++)o[d+32]=r[d];return 0}var rt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Rt(r,o){var i,e,s,d;for(e=63;e>=32;--e){for(i=0,s=e-32,d=e-12;s<d;++s)o[s]+=i-16*o[e]*rt[s-(e-32)],i=Math.floor((o[s]+128)/256),o[s]-=i*256;o[s]+=i,o[e]=0}for(i=0,s=0;s<32;s++)o[s]+=i-(o[31]>>4)*rt[s],i=o[s]>>8,o[s]&=255;for(s=0;s<32;s++)o[s]-=i*rt[s];for(e=0;e<32;e++)o[e+1]+=o[e]>>8,r[e]=o[e]&255}function Pt(r){var o=new Float64Array(64),i;for(i=0;i<64;i++)o[i]=r[i];for(i=0;i<64;i++)r[i]=0;Rt(r,o)}function on(r,o,i,e){var s=new Uint8Array(64),d=new Uint8Array(64),u=new Uint8Array(64),p,S,j=new Float64Array(64),U=[n(),n(),n(),n()];Pe(s,e,32),s[0]&=248,s[31]&=127,s[31]|=64;var V=i+64;for(p=0;p<i;p++)r[64+p]=o[p];for(p=0;p<32;p++)r[32+p]=s[32+p];for(Pe(u,r.subarray(32),i+32),Pt(u),nt(U,u),Ut(r,U),p=32;p<64;p++)r[p]=e[p];for(Pe(d,r,i+64),Pt(d),p=0;p<64;p++)j[p]=0;for(p=0;p<32;p++)j[p]=u[p];for(p=0;p<32;p++)for(S=0;S<32;S++)j[p+S]+=d[p]*s[S];return Rt(r.subarray(32),j),V}function Pn(r,o){var i=n(),e=n(),s=n(),d=n(),u=n(),p=n(),S=n();return Se(r[2],_),Et(r[1],o),pe(s,r[1]),Z(d,s,F),we(s,s,r[2]),be(d,r[2],d),pe(u,d),pe(p,u),Z(S,p,u),Z(i,S,s),Z(i,i,d),Qt(i,i),Z(i,i,s),Z(i,i,d),Z(i,i,d),Z(r[0],i,d),pe(e,r[0]),Z(e,e,d),zt(e,s)&&Z(r[0],r[0],Ue),pe(e,r[0]),Z(e,e,d),zt(e,s)?-1:(Zt(r[0])===o[31]>>7&&we(r[0],b,r[0]),Z(r[3],r[0],r[1]),0)}function Lt(r,o,i,e){var s,d=new Uint8Array(32),u=new Uint8Array(64),p=[n(),n(),n(),n()],S=[n(),n(),n(),n()];if(i<64||Pn(S,e))return-1;for(s=0;s<i;s++)r[s]=o[s];for(s=0;s<32;s++)r[s+32]=e[s];if(Pe(u,r,i),Pt(u),Ct(p,S,u),nt(S,o.subarray(32)),tt(p,S),Ut(d,p),i-=64,yt(o,0,d,0)){for(s=0;s<i;s++)r[s]=0;return-1}for(s=0;s<i;s++)r[s]=o[s+64];return i}var At=32,it=24,Oe=32,Ie=16,Fe=32,ot=32,Ye=32,De=32,jt=32,sn=it,Ln=Oe,An=Ie,Ee=64,Le=32,Be=64,It=32,Bt=64;t.lowlevel={crypto_core_hsalsa20:Ze,crypto_stream_xor:bt,crypto_stream:$t,crypto_stream_salsa20_xor:Gt,crypto_stream_salsa20:Ht,crypto_onetimeauth:wt,crypto_onetimeauth_verify:Jt,crypto_verify_16:qt,crypto_verify_32:yt,crypto_secretbox:mt,crypto_secretbox_open:_t,crypto_scalarmult:Qe,crypto_scalarmult_base:Ve,crypto_box_beforenm:et,crypto_box_afternm:en,crypto_box:Tn,crypto_box_open:Rn,crypto_box_keypair:Vt,crypto_hash:Pe,crypto_sign:on,crypto_sign_keypair:Tt,crypto_sign_open:Lt,crypto_secretbox_KEYBYTES:At,crypto_secretbox_NONCEBYTES:it,crypto_secretbox_ZEROBYTES:Oe,crypto_secretbox_BOXZEROBYTES:Ie,crypto_scalarmult_BYTES:Fe,crypto_scalarmult_SCALARBYTES:ot,crypto_box_PUBLICKEYBYTES:Ye,crypto_box_SECRETKEYBYTES:De,crypto_box_BEFORENMBYTES:jt,crypto_box_NONCEBYTES:sn,crypto_box_ZEROBYTES:Ln,crypto_box_BOXZEROBYTES:An,crypto_sign_BYTES:Ee,crypto_sign_PUBLICKEYBYTES:Le,crypto_sign_SECRETKEYBYTES:Be,crypto_sign_SEEDBYTES:It,crypto_hash_BYTES:Bt,gf:n,D:F,L:rt,pack25519:je,unpack25519:Et,M:Z,A:be,S:pe,Z:we,pow2523:Qt,add:tt,set25519:Se,modL:Rt,scalarmult:Ct,scalarbase:nt};function an(r,o){if(r.length!==At)throw new Error("bad key size");if(o.length!==it)throw new Error("bad nonce size")}function jn(r,o){if(r.length!==Ye)throw new Error("bad public key size");if(o.length!==De)throw new Error("bad secret key size")}function ve(){for(var r=0;r<arguments.length;r++)if(!(arguments[r]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function fn(r){for(var o=0;o<r.length;o++)r[o]=0}t.randomBytes=function(r){var o=new Uint8Array(r);return f(o,r),o},t.secretbox=function(r,o,i){ve(r,o,i),an(i,o);for(var e=new Uint8Array(Oe+r.length),s=new Uint8Array(e.length),d=0;d<r.length;d++)e[d+Oe]=r[d];return mt(s,e,e.length,o,i),s.subarray(Ie)},t.secretbox.open=function(r,o,i){ve(r,o,i),an(i,o);for(var e=new Uint8Array(Ie+r.length),s=new Uint8Array(e.length),d=0;d<r.length;d++)e[d+Ie]=r[d];return e.length<32||_t(s,e,e.length,o,i)!==0?null:s.subarray(Oe)},t.secretbox.keyLength=At,t.secretbox.nonceLength=it,t.secretbox.overheadLength=Ie,t.scalarMult=function(r,o){if(ve(r,o),r.length!==ot)throw new Error("bad n size");if(o.length!==Fe)throw new Error("bad p size");var i=new Uint8Array(Fe);return Qe(i,r,o),i},t.scalarMult.base=function(r){if(ve(r),r.length!==ot)throw new Error("bad n size");var o=new Uint8Array(Fe);return Ve(o,r),o},t.scalarMult.scalarLength=ot,t.scalarMult.groupElementLength=Fe,t.box=function(r,o,i,e){var s=t.box.before(i,e);return t.secretbox(r,o,s)},t.box.before=function(r,o){ve(r,o),jn(r,o);var i=new Uint8Array(jt);return et(i,r,o),i},t.box.after=t.secretbox,t.box.open=function(r,o,i,e){var s=t.box.before(i,e);return t.secretbox.open(r,o,s)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var r=new Uint8Array(Ye),o=new Uint8Array(De);return Vt(r,o),{publicKey:r,secretKey:o}},t.box.keyPair.fromSecretKey=function(r){if(ve(r),r.length!==De)throw new Error("bad secret key size");var o=new Uint8Array(Ye);return Ve(o,r),{publicKey:o,secretKey:new Uint8Array(r)}},t.box.publicKeyLength=Ye,t.box.secretKeyLength=De,t.box.sharedKeyLength=jt,t.box.nonceLength=sn,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(r,o){if(ve(r,o),o.length!==Be)throw new Error("bad secret key size");var i=new Uint8Array(Ee+r.length);return on(i,r,r.length,o),i},t.sign.open=function(r,o){if(ve(r,o),o.length!==Le)throw new Error("bad public key size");var i=new Uint8Array(r.length),e=Lt(i,r,r.length,o);if(e<0)return null;for(var s=new Uint8Array(e),d=0;d<s.length;d++)s[d]=i[d];return s},t.sign.detached=function(r,o){for(var i=t.sign(r,o),e=new Uint8Array(Ee),s=0;s<e.length;s++)e[s]=i[s];return e},t.sign.detached.verify=function(r,o,i){if(ve(r,o,i),o.length!==Ee)throw new Error("bad signature size");if(i.length!==Le)throw new Error("bad public key size");var e=new Uint8Array(Ee+r.length),s=new Uint8Array(Ee+r.length),d;for(d=0;d<Ee;d++)e[d]=o[d];for(d=0;d<r.length;d++)e[d+Ee]=r[d];return Lt(s,e,e.length,i)>=0},t.sign.keyPair=function(){var r=new Uint8Array(Le),o=new Uint8Array(Be);return Tt(r,o),{publicKey:r,secretKey:o}},t.sign.keyPair.fromSecretKey=function(r){if(ve(r),r.length!==Be)throw new Error("bad secret key size");for(var o=new Uint8Array(Le),i=0;i<o.length;i++)o[i]=r[32+i];return{publicKey:o,secretKey:new Uint8Array(r)}},t.sign.keyPair.fromSeed=function(r){if(ve(r),r.length!==It)throw new Error("bad seed size");for(var o=new Uint8Array(Le),i=new Uint8Array(Be),e=0;e<32;e++)i[e]=r[e];return Tt(o,i,!0),{publicKey:o,secretKey:i}},t.sign.publicKeyLength=Le,t.sign.secretKeyLength=Be,t.sign.seedLength=It,t.sign.signatureLength=Ee,t.hash=function(r){ve(r);var o=new Uint8Array(Bt);return Pe(o,r,r.length),o},t.hash.hashLength=Bt,t.verify=function(r,o){return ve(r,o),r.length===0||o.length===0||r.length!==o.length?!1:ke(r,0,o,0,r.length)===0},t.setPRNG=function(r){f=r},function(){var r=typeof self<"u"?self.crypto||self.msCrypto:null;if(r&&r.getRandomValues){var o=65536;t.setPRNG(function(i,e){var s,d=new Uint8Array(e);for(s=0;s<e;s+=o)r.getRandomValues(d.subarray(s,s+Math.min(e-s,o)));for(s=0;s<e;s++)i[s]=d[s];fn(d)})}else typeof Wn<"u"&&(r=kn,r&&r.randomBytes&&t.setPRNG(function(i,e){var s,d=r.randomBytes(e);for(s=0;s<e;s++)i[s]=d[s];fn(d)}))}()})(a.exports?a.exports:self.nacl=self.nacl||{})})(yn);var On=yn.exports;const st=gn(On);var Ce;(function(a){a[a.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",a[a.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",a[a.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",a[a.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",a[a.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",a[a.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",a[a.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Ce||(Ce={}));var cn;(function(a){a[a.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",a[a.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(cn||(cn={}));var Me;(function(a){a[a.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",a[a.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",a[a.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",a[a.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",a[a.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Me||(Me={}));var ln;(function(a){a[a.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",a[a.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",a[a.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",a[a.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",a[a.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(ln||(ln={}));var dn;(function(a){a[a.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",a[a.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",a[a.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",a[a.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(dn||(dn={}));var un;(function(a){a.MAINNET="-239",a.TESTNET="-3"})(un||(un={}));function Fn(a,t){const n=He.encodeBase64(a);return t?encodeURIComponent(n):n}function Yn(a,t){return t&&(a=decodeURIComponent(a)),He.decodeBase64(a)}function Dn(a,t=!1){let n;return a instanceof Uint8Array?n=a:(typeof a!="string"&&(a=JSON.stringify(a)),n=He.decodeUTF8(a)),Fn(n,t)}function qn(a,t=!1){const n=Yn(a,t);return{toString(){return He.encodeUTF8(n)},toObject(){try{return JSON.parse(He.encodeUTF8(n))}catch{return null}},toUint8Array(){return n}}}const bn={encode:Dn,decode:qn};function Gn(a,t){const n=new Uint8Array(a.length+t.length);return n.set(a),n.set(t,a.length),n}function Hn(a,t){if(t>=a.length)throw new Error("Index is out of buffer");const n=a.slice(0,t),f=a.slice(t);return[n,f]}function Mt(a){let t="";return a.forEach(n=>{t+=("0"+(n&255).toString(16)).slice(-2)}),t}function ft(a){if(a.length%2!==0)throw new Error(`Cannot convert ${a} to bytesArray`);const t=new Uint8Array(a.length/2);for(let n=0;n<a.length;n+=2)t[n/2]=parseInt(a.slice(n,n+2),16);return t}class Nt{constructor(t){this.nonceLength=24,this.keyPair=t?this.createKeypairFromString(t):this.createKeypair(),this.sessionId=Mt(this.keyPair.publicKey)}createKeypair(){return st.box.keyPair()}createKeypairFromString(t){return{publicKey:ft(t.publicKey),secretKey:ft(t.secretKey)}}createNonce(){return st.randomBytes(this.nonceLength)}encrypt(t,n){const f=new TextEncoder().encode(t),l=this.createNonce(),h=st.box(f,l,n,this.keyPair.secretKey);return Gn(l,h)}decrypt(t,n){const[f,l]=Hn(t,this.nonceLength),h=st.box.open(l,f,n,this.keyPair.secretKey);if(!h)throw new Error(`Decryption error: 
 message: ${t.toString()} 
 sender pubkey: ${n.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(h)}stringifyKeypair(){return{publicKey:Mt(this.keyPair.publicKey),secretKey:Mt(this.keyPair.secretKey)}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $n(a,t){var n={};for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&t.indexOf(f)<0&&(n[f]=a[f]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,f=Object.getOwnPropertySymbols(a);l<f.length;l++)t.indexOf(f[l])<0&&Object.prototype.propertyIsEnumerable.call(a,f[l])&&(n[f[l]]=a[f[l]]);return n}function R(a,t,n,f){function l(h){return h instanceof n?h:new n(function(b){b(h)})}return new(n||(n=Promise))(function(h,b){function _(ne){try{F(f.next(ne))}catch(ie){b(ie)}}function z(ne){try{F(f.throw(ne))}catch(ie){b(ie)}}function F(ne){ne.done?h(ne.value):l(ne.value).then(_,z)}F((f=f.apply(a,[])).next())})}class M extends Error{constructor(t,n){super(t,n),this.message=`${M.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${t?`
`+t:""}`,Object.setPrototypeOf(this,M.prototype)}get info(){return""}}M.prefix="[TON_CONNECT_SDK_ERROR]";class kt extends M{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...t){super(...t),Object.setPrototypeOf(this,kt.prototype)}}class dt extends M{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...t){super(...t),Object.setPrototypeOf(this,dt.prototype)}}class ut extends M{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...t){super(...t),Object.setPrototypeOf(this,ut.prototype)}}class Ot extends M{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ot.prototype)}}class ct extends M{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...t){super(...t),Object.setPrototypeOf(this,ct.prototype)}}function Jn(a){return"jsBridgeKey"in a}class ht extends M{get info(){return"User rejects the action in the wallet."}constructor(...t){super(...t),Object.setPrototypeOf(this,ht.prototype)}}class xt extends M{get info(){return"Request to the wallet contains errors."}constructor(...t){super(...t),Object.setPrototypeOf(this,xt.prototype)}}class vt extends M{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...t){super(...t),Object.setPrototypeOf(this,vt.prototype)}}class Ft extends M{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ft.prototype)}}class Yt extends M{get info(){return"An error occurred while fetching the wallets list."}constructor(...t){super(...t),Object.setPrototypeOf(this,Yt.prototype)}}class Te extends M{constructor(...t){super(...t),Object.setPrototypeOf(this,Te.prototype)}}const hn={[Ce.UNKNOWN_ERROR]:Te,[Ce.USER_REJECTS_ERROR]:ht,[Ce.BAD_REQUEST_ERROR]:xt,[Ce.UNKNOWN_APP_ERROR]:vt,[Ce.MANIFEST_NOT_FOUND_ERROR]:ut,[Ce.MANIFEST_CONTENT_ERROR]:dt};class zn{parseError(t){let n=Te;return t.code in hn&&(n=hn[t.code]||Te),new n(t.message)}}const Zn=new zn;class Xn{isError(t){return"error"in t}}const xn={[Me.UNKNOWN_ERROR]:Te,[Me.USER_REJECTS_ERROR]:ht,[Me.BAD_REQUEST_ERROR]:xt,[Me.UNKNOWN_APP_ERROR]:vt};class Qn extends Xn{convertToRpcRequest(t){return{method:"sendTransaction",params:[JSON.stringify(t)]}}parseAndThrowError(t){let n=Te;throw t.error.code in xn&&(n=xn[t.error.code]||Te),new n(t.error.message)}convertFromRpcResponse(t){return{boc:t.result}}}const at=new Qn;class Vn{constructor(t,n){this.storage=t,this.storeKey="ton-connect-storage_http-bridge-gateway::"+n}storeLastEventId(t){return R(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,t)})}removeLastEventId(){return R(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return R(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);return t||null})}}function er(a){return a.slice(-1)==="/"?a.slice(0,-1):a}function wn(a,t){return er(a)+"/"+t}function tr(a){if(!a)return!1;const t=new URL(a);return t.protocol==="tg:"||t.hostname==="t.me"}function nr(a){return a.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--")}function mn(a,t){return R(this,void 0,void 0,function*(){return new Promise((n,f)=>{var l,h;if(!((l=void 0)===null||l===void 0)&&l.aborted){f(new M("Delay aborted"));return}const b=setTimeout(()=>n(),a);(h=void 0)===null||h===void 0||h.addEventListener("abort",()=>{clearTimeout(b),f(new M("Delay aborted"))})})})}function me(a){const t=new AbortController;return a!=null&&a.aborted?t.abort():a==null||a.addEventListener("abort",()=>t.abort(),{once:!0}),t}function qe(a,t){var n,f;return R(this,void 0,void 0,function*(){const l=(n=t==null?void 0:t.attempts)!==null&&n!==void 0?n:10,h=(f=t==null?void 0:t.delayMs)!==null&&f!==void 0?f:200,b=me(t==null?void 0:t.signal);if(typeof a!="function")throw new M(`Expected a function, got ${typeof a}`);let _=0,z;for(;_<l;){if(b.signal.aborted)throw new M(`Aborted after attempts ${_}`);try{return yield a({signal:b.signal})}catch(F){z=F,_++,_<l&&(yield mn(h))}}throw z})}function le(...a){try{console.debug("[TON_CONNECT_SDK]",...a)}catch{}}function _e(...a){try{console.error("[TON_CONNECT_SDK]",...a)}catch{}}function rr(...a){try{console.warn("[TON_CONNECT_SDK]",...a)}catch{}}function ir(a,t){let n=null,f=null,l=null,h=null,b=null;const _=(ie,...ge)=>R(this,void 0,void 0,function*(){if(h=ie??null,b==null||b.abort(),b=me(ie),b.signal.aborted)throw new M("Resource creation was aborted");f=ge??null;const Ue=a(b.signal,...ge);l=Ue;const ye=yield Ue;if(l!==Ue&&ye!==n)throw yield t(ye),new M("Resource creation was aborted by a new resource creation");return n=ye,n});return{create:_,current:()=>n??null,dispose:()=>R(this,void 0,void 0,function*(){try{const ie=n;n=null;const ge=l;l=null;try{b==null||b.abort()}catch{}yield Promise.allSettled([ie?t(ie):Promise.resolve(),ge?t(yield ge):Promise.resolve()])}catch{}}),recreate:ie=>R(this,void 0,void 0,function*(){const ge=n,Ue=l,ye=f,ke=h;if(yield mn(ie),ge===n&&Ue===l&&ye===f&&ke===h)return yield _(h,...ye??[]);throw new M("Resource recreation was aborted by a new resource creation")})}}function or(a,t){const n=t==null?void 0:t.timeout,f=t==null?void 0:t.signal,l=me(f);return new Promise((h,b)=>{if(l.signal.aborted){b(new M("Operation aborted"));return}let _;typeof n<"u"&&(_=setTimeout(()=>{l.abort(),b(new M(`Timeout after ${n}ms`))},n)),l.signal.addEventListener("abort",()=>{clearTimeout(_),b(new M("Operation aborted"))},{once:!0});const z={timeout:n,abort:l.signal};a(h,b,z).finally(()=>clearTimeout(_))})}class Wt{constructor(t,n,f,l,h){this.bridgeUrl=n,this.sessionId=f,this.listener=l,this.errorsListener=h,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=5e3,this.eventSource=ir((b,_)=>R(this,void 0,void 0,function*(){const z={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:b,openingDeadlineMS:_};return yield sr(z)}),b=>R(this,void 0,void 0,function*(){b.close()})),this.bridgeGatewayStorage=new Vn(t,n)}get isReady(){const t=this.eventSource.current();return(t==null?void 0:t.readyState)===EventSource.OPEN}get isClosed(){const t=this.eventSource.current();return(t==null?void 0:t.readyState)!==EventSource.OPEN}get isConnecting(){const t=this.eventSource.current();return(t==null?void 0:t.readyState)===EventSource.CONNECTING}registerSession(t){return R(this,void 0,void 0,function*(){yield this.eventSource.create(t==null?void 0:t.signal,t==null?void 0:t.openingDeadlineMS)})}send(t,n,f,l){var h;return R(this,void 0,void 0,function*(){const b={};typeof l=="number"?b.ttl=l:(b.ttl=l==null?void 0:l.ttl,b.signal=l==null?void 0:l.signal,b.attempts=l==null?void 0:l.attempts);const _=new URL(wn(this.bridgeUrl,this.postPath));_.searchParams.append("client_id",this.sessionId),_.searchParams.append("to",n),_.searchParams.append("ttl",((b==null?void 0:b.ttl)||this.defaultTtl).toString()),_.searchParams.append("topic",f);const z=bn.encode(t);yield qe(F=>R(this,void 0,void 0,function*(){const ne=yield this.post(_,z,F.signal);if(!ne.ok)throw new M(`Bridge send failed, status ${ne.status}`)}),{attempts:(h=b==null?void 0:b.attempts)!==null&&h!==void 0?h:Number.MAX_SAFE_INTEGER,delayMs:5e3,signal:b==null?void 0:b.signal})})}pause(){this.eventSource.dispose().catch(t=>_e(`Bridge pause failed, ${t}`))}unPause(){return R(this,void 0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return R(this,void 0,void 0,function*(){yield this.eventSource.dispose().catch(t=>_e(`Bridge close failed, ${t}`))})}setListener(t){this.listener=t}setErrorsListener(t){this.errorsListener=t}post(t,n,f){return R(this,void 0,void 0,function*(){const l=yield fetch(t,{method:"post",body:n,signal:f});if(!l.ok)throw new M(`Bridge send failed, status ${l.status}`);return l})}errorsHandler(t,n){return R(this,void 0,void 0,function*(){if(this.isConnecting){_e("Bridge error",JSON.stringify(n));return}if(this.isReady){try{this.errorsListener(n)}catch{}return}if(this.isClosed)return t.close(),le(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new M("Bridge error, unknown state")})}messagesHandler(t){return R(this,void 0,void 0,function*(){if(t.data===this.heartbeatMessage||(yield this.bridgeGatewayStorage.storeLastEventId(t.lastEventId),this.isClosed))return;let n;try{n=JSON.parse(t.data)}catch(f){throw new M(`Bridge message parse failed, message ${f.data}`)}this.listener(n)})}}function sr(a){return R(this,void 0,void 0,function*(){return yield or((t,n,f)=>R(this,void 0,void 0,function*(){var l;const b=me(f.signal).signal;if(b.aborted){n(new M("Bridge connection aborted"));return}const _=new URL(wn(a.bridgeUrl,a.ssePath));_.searchParams.append("client_id",a.sessionId);const z=yield a.bridgeGatewayStorage.getLastEventId();if(z&&_.searchParams.append("last_event_id",z),b.aborted){n(new M("Bridge connection aborted"));return}const F=new EventSource(_.toString());F.onerror=ne=>R(this,void 0,void 0,function*(){if(b.aborted){F.close(),n(new M("Bridge connection aborted"));return}try{const ie=yield a.errorHandler(F,ne);ie!==F&&F.close(),ie&&ie!==F&&t(ie)}catch(ie){F.close(),n(ie)}}),F.onopen=()=>{if(b.aborted){F.close(),n(new M("Bridge connection aborted"));return}t(F)},F.onmessage=ne=>{if(b.aborted){F.close(),n(new M("Bridge connection aborted"));return}a.messageHandler(ne)},(l=a.signal)===null||l===void 0||l.addEventListener("abort",()=>{F.close(),n(new M("Bridge connection aborted"))})}),{timeout:a.openingDeadlineMS,signal:a.signal})})}function Ge(a){return!("connectEvent"in a)}class $e{constructor(t){this.storage=t,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(t){return R(this,void 0,void 0,function*(){if(t.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(t));if(!Ge(t)){const f={sessionKeyPair:t.session.sessionCrypto.stringifyKeypair(),walletPublicKey:t.session.walletPublicKey,bridgeUrl:t.session.bridgeUrl},l={type:"http",connectEvent:t.connectEvent,session:f,lastWalletEventId:t.lastWalletEventId,nextRpcRequestId:t.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(l))}const n={type:"http",connectionSource:t.connectionSource,sessionCrypto:t.sessionCrypto.stringifyKeypair()};return this.storage.setItem(this.storeKey,JSON.stringify(n))})}removeConnection(){return R(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return R(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);if(!t)return null;const n=JSON.parse(t);if(n.type==="injected")return n;if("connectEvent"in n){const f=new Nt(n.session.sessionKeyPair);return{type:"http",connectEvent:n.connectEvent,lastWalletEventId:n.lastWalletEventId,nextRpcRequestId:n.nextRpcRequestId,session:{sessionCrypto:f,bridgeUrl:n.session.bridgeUrl,walletPublicKey:n.session.walletPublicKey}}}return{type:"http",sessionCrypto:new Nt(n.sessionCrypto),connectionSource:n.connectionSource}})}getHttpConnection(){return R(this,void 0,void 0,function*(){const t=yield this.getConnection();if(!t)throw new M("Trying to read HTTP connection source while nothing is stored");if(t.type==="injected")throw new M("Trying to read HTTP connection source while injected connection is stored");return t})}getHttpPendingConnection(){return R(this,void 0,void 0,function*(){const t=yield this.getConnection();if(!t)throw new M("Trying to read HTTP connection source while nothing is stored");if(t.type==="injected")throw new M("Trying to read HTTP connection source while injected connection is stored");if(!Ge(t))throw new M("Trying to read HTTP-pending connection while http connection is stored");return t})}getInjectedConnection(){return R(this,void 0,void 0,function*(){const t=yield this.getConnection();if(!t)throw new M("Trying to read Injected bridge connection source while nothing is stored");if((t==null?void 0:t.type)==="http")throw new M("Trying to read Injected bridge connection source while HTTP connection is stored");return t})}storedConnectionType(){return R(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);return t?JSON.parse(t).type:null})}storeLastWalletEventId(t){return R(this,void 0,void 0,function*(){const n=yield this.getConnection();if(n&&n.type==="http"&&!Ge(n))return n.lastWalletEventId=t,this.storeConnection(n)})}getLastWalletEventId(){return R(this,void 0,void 0,function*(){const t=yield this.getConnection();if(t&&"lastWalletEventId"in t)return t.lastWalletEventId})}increaseNextRpcRequestId(){return R(this,void 0,void 0,function*(){const t=yield this.getConnection();if(t&&"nextRpcRequestId"in t){const n=t.nextRpcRequestId||0;return t.nextRpcRequestId=n+1,this.storeConnection(t)}})}getNextRpcRequestId(){return R(this,void 0,void 0,function*(){const t=yield this.getConnection();return t&&"nextRpcRequestId"in t&&t.nextRpcRequestId||0})}}const _n=2;class Je{constructor(t,n){this.storage=t,this.walletConnectionSource=n,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=5e3,this.connectionStorage=new $e(t)}static fromStorage(t){return R(this,void 0,void 0,function*(){const f=yield new $e(t).getHttpConnection();return Ge(f)?new Je(t,f.connectionSource):new Je(t,{bridgeUrl:f.session.bridgeUrl})})}connect(t,n){var f;const l=me(n==null?void 0:n.signal);(f=this.abortController)===null||f===void 0||f.abort(),this.abortController=l,this.closeGateways();const h=new Nt;this.session={sessionCrypto:h,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:h}).then(()=>R(this,void 0,void 0,function*(){l.signal.aborted||(yield qe(_=>this.openGateways(h,{openingDeadlineMS:n==null?void 0:n.openingDeadlineMS,signal:_==null?void 0:_.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:5e3,signal:l.signal}))}));const b="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(b,t)}restoreConnection(t){var n,f;return R(this,void 0,void 0,function*(){const l=me(t==null?void 0:t.signal);if((n=this.abortController)===null||n===void 0||n.abort(),this.abortController=l,l.signal.aborted)return;this.closeGateways();const h=yield this.connectionStorage.getHttpConnection();if(!h||l.signal.aborted)return;const b=(f=t==null?void 0:t.openingDeadlineMS)!==null&&f!==void 0?f:this.defaultOpeningDeadlineMS;if(Ge(h))return this.session={sessionCrypto:h.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(h.sessionCrypto,{openingDeadlineMS:b,signal:l==null?void 0:l.signal});if(Array.isArray(this.walletConnectionSource))throw new M("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=h.session,this.gateway&&(le("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Wt(this.storage,this.walletConnectionSource.bridgeUrl,h.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),!l.signal.aborted){this.listeners.forEach(_=>_(h.connectEvent));try{yield qe(_=>this.gateway.registerSession({openingDeadlineMS:b,signal:_.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:5e3,signal:l.signal})}catch{yield this.disconnect({signal:l.signal});return}}})}sendRequest(t,n){const f={};return typeof n=="function"?f.onRequestSent=n:(f.onRequestSent=n==null?void 0:n.onRequestSent,f.signal=n==null?void 0:n.signal,f.attempts=n==null?void 0:n.attempts),new Promise((l,h)=>R(this,void 0,void 0,function*(){var b;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new M("Trying to send bridge request without session");const _=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),le("Send http-bridge request:",Object.assign(Object.assign({},t),{id:_}));const z=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{id:_})),ft(this.session.walletPublicKey));try{yield this.gateway.send(z,this.session.walletPublicKey,t.method,{attempts:f==null?void 0:f.attempts,signal:f==null?void 0:f.signal}),(b=f==null?void 0:f.onRequestSent)===null||b===void 0||b.call(f),this.pendingRequests.set(_.toString(),l)}catch(F){h(F)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(t){return R(this,void 0,void 0,function*(){return new Promise(n=>R(this,void 0,void 0,function*(){let f=!1,l=null;const h=()=>{f||(f=!0,this.removeBridgeAndSession().then(n))};try{this.closeGateways();const b=me(t==null?void 0:t.signal);l=setTimeout(()=>{b.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:h,signal:b.signal,attempts:1})}catch(b){le("Disconnect error:",b),f||this.removeBridgeAndSession().then(n)}finally{l&&clearTimeout(l),h()}}))})}listen(t){return this.listeners.push(t),()=>this.listeners=this.listeners.filter(n=>n!==t)}pause(){var t;(t=this.gateway)===null||t===void 0||t.pause(),this.pendingGateways.forEach(n=>n.pause())}unPause(){return R(this,void 0,void 0,function*(){const t=this.pendingGateways.map(n=>n.unPause());this.gateway&&t.push(this.gateway.unPause()),yield Promise.all(t)})}pendingGatewaysListener(t,n,f){return R(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(t)){yield t.close();return}return this.closeGateways({except:t}),this.gateway&&(le("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=n,this.gateway=t,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(f)})}gatewayListener(t){return R(this,void 0,void 0,function*(){const n=JSON.parse(this.session.sessionCrypto.decrypt(bn.decode(t.message).toUint8Array(),ft(t.from)));if(le("Wallet message received:",n),!("event"in n)){const l=n.id.toString(),h=this.pendingRequests.get(l);if(!h){le(`Response id ${l} doesn't match any request's id`);return}h(n),this.pendingRequests.delete(l);return}if(n.id!==void 0){const l=yield this.connectionStorage.getLastWalletEventId();if(l!==void 0&&n.id<=l){_e(`Received event id (=${n.id}) must be greater than stored last wallet event id (=${l}) `);return}n.event!=="connect"&&(yield this.connectionStorage.storeLastWalletEventId(n.id))}const f=this.listeners;n.event==="connect"&&(yield this.updateSession(n,t.from)),n.event==="disconnect"&&(le("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),f.forEach(l=>l(n))})}gatewayErrorsListener(t){return R(this,void 0,void 0,function*(){throw new M(`Bridge error ${JSON.stringify(t)}`)})}updateSession(t,n){return R(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:n});const f=t.payload.items.find(h=>h.name==="ton_addr"),l=Object.assign(Object.assign({},t),{payload:Object.assign(Object.assign({},t.payload),{items:[f]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:t.id,connectEvent:l,nextRpcRequestId:0})})}removeBridgeAndSession(){return R(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(t,n){return tr(t)?this.generateTGUniversalLink(t,n):this.generateRegularUniversalLink(t,n)}generateRegularUniversalLink(t,n){const f=new URL(t);return f.searchParams.append("v",_n.toString()),f.searchParams.append("id",this.session.sessionCrypto.sessionId),f.searchParams.append("r",JSON.stringify(n)),f.toString()}generateTGUniversalLink(t,n){const l=this.generateRegularUniversalLink("about:blank",n).split("?")[1],h="tonconnect-"+nr(l),b=this.convertToDirectLink(t),_=new URL(b);return _.searchParams.append("startapp",h),_.toString()}convertToDirectLink(t){const n=new URL(t);return n.searchParams.has("attach")&&(n.searchParams.delete("attach"),n.pathname+="/start"),n.toString()}openGateways(t,n){return R(this,void 0,void 0,function*(){if(Array.isArray(this.walletConnectionSource)){this.pendingGateways.map(f=>f.close().catch()),this.pendingGateways=this.walletConnectionSource.map(f=>{const l=new Wt(this.storage,f.bridgeUrl,t.sessionId,()=>{},()=>{});return l.setListener(h=>this.pendingGatewaysListener(l,f.bridgeUrl,h)),l}),yield Promise.allSettled(this.pendingGateways.map(f=>qe(l=>this.pendingGateways.some(h=>h===f)?f.registerSession({openingDeadlineMS:n==null?void 0:n.openingDeadlineMS,signal:l.signal}):f.close(),{attempts:Number.MAX_SAFE_INTEGER,delayMs:5e3,signal:n==null?void 0:n.signal})));return}else return this.gateway&&(le("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Wt(this.storage,this.walletConnectionSource.bridgeUrl,t.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession({openingDeadlineMS:n==null?void 0:n.openingDeadlineMS,signal:n==null?void 0:n.signal})})}closeGateways(t){var n;(n=this.gateway)===null||n===void 0||n.close(),this.pendingGateways.filter(f=>f!==(t==null?void 0:t.except)).forEach(f=>f.close()),this.pendingGateways=[]}}function vn(a,t){return Sn(a,[t])}function Sn(a,t){return!a||typeof a!="object"?!1:t.every(n=>n in a)}function ar(a){try{return!vn(a,"tonconnect")||!vn(a.tonconnect,"walletInfo")?!1:Sn(a.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch{return!1}}class We{constructor(){this.storage={}}static getInstance(){return We.instance||(We.instance=new We),We.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(t){var n;return(n=this.storage[t])!==null&&n!==void 0?n:null}key(t){var n;const f=Object.keys(this.storage);return t<0||t>=f.length?null:(n=f[t])!==null&&n!==void 0?n:null}removeItem(t){delete this.storage[t]}setItem(t,n){this.storage[t]=n}}function gt(){if(!(typeof window>"u"))return window}function fr(){const a=gt();if(!a)return[];try{return Object.keys(a)}catch{return[]}}function cr(){if(!(typeof document>"u"))return document}function lr(){var a;const t=(a=gt())===null||a===void 0?void 0:a.location.origin;return t?t+"/tonconnect-manifest.json":""}function dr(){if(ur())return localStorage;if(hr())throw new M("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return We.getInstance()}function ur(){try{return typeof localStorage<"u"}catch{return!1}}function hr(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}class xe{constructor(t,n){this.injectedWalletKey=n,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const f=xe.window;if(!xe.isWindowContainsWallet(f,n))throw new Ft;this.connectionStorage=new $e(t),this.injectedWallet=f[n].tonconnect}static fromStorage(t){return R(this,void 0,void 0,function*(){const f=yield new $e(t).getInjectedConnection();return new xe(t,f.jsBridgeKey)})}static isWalletInjected(t){return xe.isWindowContainsWallet(this.window,t)}static isInsideWalletBrowser(t){return xe.isWindowContainsWallet(this.window,t)?this.window[t].tonconnect.isWalletBrowser:!1}static getCurrentlyInjectedWallets(){return this.window?fr().filter(([f,l])=>ar(l)).map(([f,l])=>({name:l.tonconnect.walletInfo.name,appName:l.tonconnect.walletInfo.app_name,aboutUrl:l.tonconnect.walletInfo.about_url,imageUrl:l.tonconnect.walletInfo.image,tondns:l.tonconnect.walletInfo.tondns,jsBridgeKey:f,injected:!0,embedded:l.tonconnect.isWalletBrowser,platforms:l.tonconnect.walletInfo.platforms})):[]}static isWindowContainsWallet(t,n){return!!t&&n in t&&typeof t[n]=="object"&&"tonconnect"in t[n]}connect(t){this._connect(_n,t)}restoreConnection(){return R(this,void 0,void 0,function*(){try{le("Injected Provider restoring connection...");const t=yield this.injectedWallet.restoreConnection();le("Injected Provider restoring connection response",t),t.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(n=>n(t))):yield this.connectionStorage.removeConnection()}catch(t){yield this.connectionStorage.removeConnection(),console.error(t)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return R(this,void 0,void 0,function*(){return new Promise(t=>{const n=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(t)};try{this.injectedWallet.disconnect(),n()}catch(f){le(f),this.sendRequest({method:"disconnect",params:[]},n)}})})}closeAllListeners(){var t;this.listenSubscriptions=!1,this.listeners=[],(t=this.unsubscribeCallback)===null||t===void 0||t.call(this)}listen(t){return this.listeners.push(t),()=>this.listeners=this.listeners.filter(n=>n!==t)}sendRequest(t,n){var f;return R(this,void 0,void 0,function*(){const l={};typeof n=="function"?l.onRequestSent=n:(l.onRequestSent=n==null?void 0:n.onRequestSent,l.signal=n==null?void 0:n.signal);const h=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),le("Send injected-bridge request:",Object.assign(Object.assign({},t),{id:h}));const b=this.injectedWallet.send(Object.assign(Object.assign({},t),{id:h}));return b.then(_=>le("Wallet message received:",_)),(f=l==null?void 0:l.onRequestSent)===null||f===void 0||f.call(l),b})}_connect(t,n){return R(this,void 0,void 0,function*(){try{le(`Injected Provider connect request: protocolVersion: ${t}, message:`,n);const f=yield this.injectedWallet.connect(t,n);le("Injected Provider connect response:",f),f.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(l=>l(f))}catch(f){le("Injected Provider connect error:",f);const l={event:"connect_error",payload:{code:0,message:f==null?void 0:f.toString()}};this.listeners.forEach(h=>h(l))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(t=>{le("Wallet message received:",t),this.listenSubscriptions&&this.listeners.forEach(n=>n(t)),t.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}xe.window=gt();class xr{constructor(){this.localStorage=dr()}getItem(t){return R(this,void 0,void 0,function*(){return this.localStorage.getItem(t)})}removeItem(t){return R(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}setItem(t,n){return R(this,void 0,void 0,function*(){this.localStorage.setItem(t,n)})}}function vr(a){return pr(a)&&a.injected}function gr(a){return vr(a)&&a.embedded}function pr(a){return"jsBridgeKey"in a}const yr=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"]},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"]},{app_name:"dewallet",name:"DeWallet",image:"https://app.delabwallet.com/logo_black.png",about_url:"https://delabwallet.com",bridge:[{type:"js",key:"dewallet"}],platforms:["chrome"]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"]}];class Kt{constructor(t){this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource="https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json",t!=null&&t.walletsListSource&&(this.walletsListSource=t.walletsListSource),t!=null&&t.cacheTTLMs&&(this.cacheTTLMs=t.cacheTTLMs)}getWallets(){return R(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return R(this,void 0,void 0,function*(){const n=(yield this.getWallets()).filter(gr);return n.length!==1?null:n[0]})}fetchWalletsList(){return R(this,void 0,void 0,function*(){let t=[];try{if(t=yield(yield fetch(this.walletsListSource)).json(),!Array.isArray(t))throw new Yt("Wrong wallets list format, wallets list must be an array.");const l=t.filter(h=>!this.isCorrectWalletConfigDTO(h));l.length&&(_e(`Wallet(s) ${l.map(h=>h.name).join(", ")} config format is wrong. They were removed from the wallets list.`),t=t.filter(h=>this.isCorrectWalletConfigDTO(h)))}catch(f){_e(f),t=yr}let n=[];try{n=xe.getCurrentlyInjectedWallets()}catch(f){_e(f)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(t),n)})}walletConfigDTOListToWalletConfigList(t){return t.map(n=>{const l={name:n.name,appName:n.app_name,imageUrl:n.image,aboutUrl:n.about_url,tondns:n.tondns,platforms:n.platforms};return n.bridge.forEach(h=>{if(h.type==="sse"&&(l.bridgeUrl=h.url,l.universalLink=n.universal_url,l.deepLink=n.deepLink),h.type==="js"){const b=h.key;l.jsBridgeKey=b,l.injected=xe.isWalletInjected(b),l.embedded=xe.isInsideWalletBrowser(b)}}),l})}mergeWalletsLists(t,n){return[...new Set(t.concat(n).map(l=>l.name)).values()].map(l=>{const h=t.find(_=>_.name===l),b=n.find(_=>_.name===l);return Object.assign(Object.assign({},h&&Object.assign({},h)),b&&Object.assign({},b))})}isCorrectWalletConfigDTO(t){if(!t||typeof t!="object")return!1;const n="name"in t,f="app_name"in t,l="image"in t,h="about_url"in t,b="platforms"in t;if(!n||!l||!h||!b||!f||!t.platforms||!Array.isArray(t.platforms)||!t.platforms.length||!("bridge"in t)||!Array.isArray(t.bridge)||!t.bridge.length)return!1;const _=t.bridge;if(_.some(ne=>!ne||typeof ne!="object"||!("type"in ne)))return!1;const z=_.find(ne=>ne.type==="sse");if(z&&(!("url"in z)||!z.url||!t.universal_url))return!1;const F=_.find(ne=>ne.type==="js");return!(F&&(!("key"in F)||!F.key))}}class lt extends M{get info(){return"Wallet doesn't support requested feature method."}constructor(...t){super(...t),Object.setPrototypeOf(this,lt.prototype)}}function br(a,t){const n=a.includes("SendTransaction"),f=a.find(l=>l&&typeof l=="object"&&l.name==="SendTransaction");if(!n&&!f)throw new lt("Wallet doesn't support SendTransaction feature.");if(f&&f.maxMessages!==void 0){if(f.maxMessages<t.requiredMessagesNumber)throw new lt(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${f.maxMessages}, but ${t.requiredMessagesNumber} is required.`);return}rr("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}function wr(){return{type:"request-version"}}function mr(a){return{type:"response-version",version:a}}function Ne(a){return{ton_connect_sdk_lib:a.ton_connect_sdk_lib,ton_connect_ui_lib:a.ton_connect_ui_lib}}function Ke(a,t){var n,f,l,h,b,_,z,F;const ie=((n=t==null?void 0:t.connectItems)===null||n===void 0?void 0:n.tonProof)&&"proof"in t.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:(l=(f=t==null?void 0:t.account)===null||f===void 0?void 0:f.address)!==null&&l!==void 0?l:null,wallet_type:(h=t==null?void 0:t.device.appName)!==null&&h!==void 0?h:null,wallet_version:(b=t==null?void 0:t.device.appVersion)!==null&&b!==void 0?b:null,auth_type:ie,custom_data:Object.assign({chain_id:(z=(_=t==null?void 0:t.account)===null||_===void 0?void 0:_.chain)!==null&&z!==void 0?z:null,provider:(F=t==null?void 0:t.provider)!==null&&F!==void 0?F:null},Ne(a))}}function _r(a){return{type:"connection-started",custom_data:Ne(a)}}function Sr(a,t){return Object.assign({type:"connection-completed",is_success:!0},Ke(a,t))}function Er(a,t,n){return{type:"connection-error",is_success:!1,error_message:t,error_code:n??null,custom_data:Ne(a)}}function Ur(a){return{type:"connection-restoring-started",custom_data:Ne(a)}}function Cr(a,t){return Object.assign({type:"connection-restoring-completed",is_success:!0},Ke(a,t))}function Tr(a,t){return{type:"connection-restoring-error",is_success:!1,error_message:t,custom_data:Ne(a)}}function Dt(a,t){var n,f,l,h;return{valid_until:(n=String(t.validUntil))!==null&&n!==void 0?n:null,from:(h=(f=t.from)!==null&&f!==void 0?f:(l=a==null?void 0:a.account)===null||l===void 0?void 0:l.address)!==null&&h!==void 0?h:null,messages:t.messages.map(b=>{var _,z;return{address:(_=b.address)!==null&&_!==void 0?_:null,amount:(z=b.amount)!==null&&z!==void 0?z:null}})}}function Rr(a,t,n){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},Ke(a,t)),Dt(t,n))}function Pr(a,t,n,f){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:f.boc},Ke(a,t)),Dt(t,n))}function Lr(a,t,n,f,l){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:f,error_code:l??null},Ke(a,t)),Dt(t,n))}function Ar(a,t,n){return Object.assign({type:"disconnection",scope:n},Ke(a,t))}class jr{constructor(){this.window=gt()}dispatchEvent(t,n){var f;return R(this,void 0,void 0,function*(){const l=new CustomEvent(t,{detail:n});(f=this.window)===null||f===void 0||f.dispatchEvent(l)})}addEventListener(t,n,f){var l;return R(this,void 0,void 0,function*(){return(l=this.window)===null||l===void 0||l.addEventListener(t,n,f),()=>{var h;return(h=this.window)===null||h===void 0?void 0:h.removeEventListener(t,n)}})}}class Ir{constructor(t){var n;this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=(n=t==null?void 0:t.eventDispatcher)!==null&&n!==void 0?n:new jr,this.tonConnectSdkVersion=t.tonConnectSdkVersion,this.init().catch()}get version(){return Ne({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return R(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch{}})}setRequestVersionHandler(){return R(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>R(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",mr(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return R(this,void 0,void 0,function*(){return new Promise((t,n)=>R(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",f=>{t(f.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",wr())}catch(f){n(f)}}))})}dispatchUserActionEvent(t){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${t.type}`,t).catch()}catch{}}trackConnectionStarted(...t){try{const n=_r(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackConnectionCompleted(...t){try{const n=Sr(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackConnectionError(...t){try{const n=Er(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackConnectionRestoringStarted(...t){try{const n=Ur(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackConnectionRestoringCompleted(...t){try{const n=Cr(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackConnectionRestoringError(...t){try{const n=Tr(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackDisconnection(...t){try{const n=Ar(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackTransactionSentForSignature(...t){try{const n=Rr(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackTransactionSigned(...t){try{const n=Pr(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}trackTransactionSigningFailed(...t){try{const n=Lr(this.version,...t);this.dispatchUserActionEvent(n)}catch{}}}const Br="3.0.3";class pt{constructor(t){if(this.walletsList=new Kt,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(t==null?void 0:t.manifestUrl)||lr(),storage:(t==null?void 0:t.storage)||new xr},this.walletsList=new Kt({walletsListSource:t==null?void 0:t.walletsListSource,cacheTTLMs:t==null?void 0:t.walletsListCacheTTLMs}),this.tracker=new Ir({eventDispatcher:t==null?void 0:t.eventDispatcher,tonConnectSdkVersion:Br}),!this.dappSettings.manifestUrl)throw new kt("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new $e(this.dappSettings.storage),t!=null&&t.disableAutoPauseConnection||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var t;return((t=this._wallet)===null||t===void 0?void 0:t.account)||null}get wallet(){return this._wallet}set wallet(t){this._wallet=t,this.statusChangeSubscriptions.forEach(n=>n(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(t,n){return this.statusChangeSubscriptions.push(t),n&&this.statusChangeErrorSubscriptions.push(n),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(f=>f!==t),n&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(f=>f!==n))}}connect(t,n){var f,l;const h={};if(typeof n=="object"&&"tonProof"in n&&(h.request=n),typeof n=="object"&&("openingDeadlineMS"in n||"signal"in n||"request"in n)&&(h.request=n==null?void 0:n.request,h.openingDeadlineMS=n==null?void 0:n.openingDeadlineMS,h.signal=n==null?void 0:n.signal),this.connected)throw new Ot;const b=me(h==null?void 0:h.signal);if((f=this.abortController)===null||f===void 0||f.abort(),this.abortController=b,b.signal.aborted)throw new M("Connection was aborted");return(l=this.provider)===null||l===void 0||l.closeConnection(),this.provider=this.createProvider(t),b.signal.addEventListener("abort",()=>{var _;(_=this.provider)===null||_===void 0||_.closeConnection(),this.provider=null}),this.tracker.trackConnectionStarted(),this.provider.connect(this.createConnectRequest(h==null?void 0:h.request),{openingDeadlineMS:h==null?void 0:h.openingDeadlineMS,signal:b.signal})}restoreConnection(t){var n,f;return R(this,void 0,void 0,function*(){this.tracker.trackConnectionRestoringStarted();const l=me(t==null?void 0:t.signal);if((n=this.abortController)===null||n===void 0||n.abort(),this.abortController=l,l.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}const[h,b]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(l.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let _=null;try{switch(h){case"http":_=yield Je.fromStorage(this.dappSettings.storage);break;case"injected":_=yield xe.fromStorage(this.dappSettings.storage);break;default:if(b)_=this.createProvider(b);else return}}catch{this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),_==null||_.closeConnection(),_=null;return}if(l.signal.aborted){_==null||_.closeConnection(),this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}if(!_){_e("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}(f=this.provider)===null||f===void 0||f.closeConnection(),this.provider=_,_.listen(this.walletEventsListener.bind(this));const z=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted"),_==null||_.closeConnection(),_=null};return l.signal.addEventListener("abort",z),yield qe(F=>R(this,void 0,void 0,function*(){yield _==null?void 0:_.restoreConnection({openingDeadlineMS:t==null?void 0:t.openingDeadlineMS,signal:F.signal}),l.signal.removeEventListener("abort",z),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:5e3,signal:t==null?void 0:t.signal})})}sendTransaction(t,n){return R(this,void 0,void 0,function*(){const f={};typeof n=="function"?f.onRequestSent=n:(f.onRequestSent=n==null?void 0:n.onRequestSent,f.signal=n==null?void 0:n.signal);const l=me(f==null?void 0:f.signal);if(l.signal.aborted)throw new M("Transaction sending was aborted");this.checkConnection(),br(this.wallet.device.features,{requiredMessagesNumber:t.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,t);const{validUntil:h}=t,b=$n(t,["validUntil"]),_=t.from||this.account.address,z=t.network||this.account.chain,F=yield this.provider.sendRequest(at.convertToRpcRequest(Object.assign(Object.assign({},b),{valid_until:h,from:_,network:z})),{onRequestSent:f.onRequestSent,signal:l.signal});if(at.isError(F))return this.tracker.trackTransactionSigningFailed(this.wallet,t,F.error.message,F.error.code),at.parseAndThrowError(F);const ne=at.convertFromRpcResponse(F);return this.tracker.trackTransactionSigned(this.wallet,t,ne),ne})}disconnect(t){var n;return R(this,void 0,void 0,function*(){if(!this.connected)throw new ct;const f=me(t==null?void 0:t.signal),l=this.abortController;if(this.abortController=f,f.signal.aborted)throw new M("Disconnect was aborted");this.onWalletDisconnected("dapp"),yield(n=this.provider)===null||n===void 0?void 0:n.disconnect({signal:f.signal}),l==null||l.abort()})}pauseConnection(){var t;((t=this.provider)===null||t===void 0?void 0:t.type)==="http"&&this.provider.pause()}unPauseConnection(){var t;return((t=this.provider)===null||t===void 0?void 0:t.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){const t=cr();if(t)try{t.addEventListener("visibilitychange",()=>{t.hidden?this.pauseConnection():this.unPauseConnection().catch()})}catch(n){_e("Cannot subscribe to the document.visibilitychange: ",n)}}createProvider(t){let n;return!Array.isArray(t)&&Jn(t)?n=new xe(this.dappSettings.storage,t.jsBridgeKey):n=new Je(this.dappSettings.storage,t),n.listen(this.walletEventsListener.bind(this)),n}walletEventsListener(t){switch(t.event){case"connect":this.onWalletConnected(t.payload);break;case"connect_error":this.onWalletConnectError(t.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(t){const n=t.items.find(h=>h.name==="ton_addr"),f=t.items.find(h=>h.name==="ton_proof");if(!n)throw new M("ton_addr connection item was not found");const l={device:t.device,provider:this.provider.type,account:{address:n.address,chain:n.network,walletStateInit:n.walletStateInit,publicKey:n.publicKey}};f&&(l.connectItems={tonProof:f}),this.wallet=l,this.tracker.trackConnectionCompleted(l)}onWalletConnectError(t){const n=Zn.parseError(t);if(this.statusChangeErrorSubscriptions.forEach(f=>f(n)),le(n),this.tracker.trackConnectionError(t.message,t.code),n instanceof ut||n instanceof dt)throw _e(n),n}onWalletDisconnected(t){this.tracker.trackDisconnection(this.wallet,t),this.wallet=null}checkConnection(){if(!this.connected)throw new ct}createConnectRequest(t){const n=[{name:"ton_addr"}];return t!=null&&t.tonProof&&n.push({name:"ton_proof",payload:t.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:n}}}pt.walletsList=new Kt;pt.isWalletInjected=a=>xe.isWalletInjected(a);pt.isInsideWalletBrowser=a=>xe.isInsideWalletBrowser(a);for(let a=0;a<=255;a++){let t=a.toString(16);t.length<2&&(t="0"+t)}document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("app"),t=()=>{a.innerHTML=`
            <div class="container">
                <h1>Connect TON Wallet</h1>
                <button class="button" id="connectWallet">Connect Wallet</button>
                <h2>Select Language</h2>
                <select id="appLanguage">
                    <option value="en">English</option>
                    <option value="ru">Русский</option>
                </select>
                <h2>Languages You Know</h2>
                <select id="userLanguages" multiple>
                    <option value="en">English</option>
                    <option value="ru">Русский</option>
                    <option value="es">Español</option>
                    <option value="fr">Français</option>
                    <option value="de">Deutsch</option>
                    <!-- Добавьте другие языки по необходимости -->
                </select>
                <button class="button" id="nextButton">Next</button>
            </div>
        `,document.getElementById("connectWallet").addEventListener("click",n),document.getElementById("nextButton").addEventListener("click",f)},n=()=>{new pt({manifestUrl:"https://raw.githubusercontent.com/reshikino/auf-coin-app/main/tonconnect-manifest.json"}).connectWallet().then(h=>{console.log("Connected to wallet",h)}).catch(h=>{console.error("Failed to connect to wallet",h)})},f=()=>{a.innerHTML=`
            <div class="container">
                <h1>Loading...</h1>
                <p>Coming soon</p>
            </div>
        `};t()});
